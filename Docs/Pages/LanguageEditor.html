<h2>Language Editor</h2>
<p><img alt="" src="/Docs/Images/MenuLanguageEditor.png" style="width: 365px; height: 156px;" /></p>

<p>The built-in language editor allows the creation of new language packs or the correction of language texts in an existing pack.</p>

<h2><b>How Language Files Are Used</b></h2>

<p>Language packs are stored in the Languages folder where MultiCommander.exe is located. Each language pack is a zip archive; one per language. Each zip files contains all the language files for all the extension/plug-ins for that language.</p>

<p>Multi Commander always reads the English language pack first and store all of the language texts in memory. Then the language that was configured is read and it will overwrite all of its translated texts. If any text item is not translated then the English text is used.</p>

<p>Each language pack only contains language files for the built-in Core and any Extensions/Plug-ins that are delivered with Multi Commander. So an Extension/Plug-in created by a user in their own language will not be found here. If Multi Commander does not find a matching language file in the language pack, it will search for the language files in the folder where the extensionor plug-in is located</p>

<p>Having the language files in a zip archive is not optimal when creating translations or modifying them. They are harder to test and verify. Also the built-in language editor needs to have them unpacked.<br />
When started Multi Commander will first look for the unpacked language packs in the "<multicommander userdata=""><strong>Languages</strong>" folder and if a version match is found they will beused.&nbsp; If Multi Commander is newer than the unpacked language files, they will not be used.</multicommander></p>

<div class="dochints">
<fieldset><legend>Tip</legend> Type "<b>:gouserdata</b>" in the command line bar to take you to the Multi Commander UserData folder (eg. "C:\Users\Mathias\AppData\Roaming\MultiCommander\UserData\")</fieldset>
</div>

<p>When starting the Language Editor it will ask if it should unpack the language pack to the UserData folder.</p>

<p>The next time that Multi Commander is started it will read the unpacked language files from the UserData folder, allowing modifications and additions to be verified</p>

<p>When the unpacked language files in the "UserData\Languages" folder are no longer needed or wanted they can be deleted. Multi Commander will then automatically revert to loading them from the zipped language packs again.</p>

<h2><b>Language Editor Panel</b></h2>

<p><img alt="" src="/Docs/Images/LanguageEditorPanel2.png" style="width: 678px; height: 235px;" /></p>

<p>The language editor panel allow text items to be modified. It is also possible to add support for new language and to export a language pack.</p>

<h3>Save Button</h3>

<p>The save button will save all the changes for the currenly selected language.</p>

<h3>Language Properties Button</h3>

<p>this opens a dialog showing properties for the selected language, for example the language name and language code it should use.</p>

<h3>Type Dropdown</h3>

<p>This lists which extension/plug-in types existis in Multi Commander. Select one and the next dropdown will update with all the extension/plug-ins for that type.<br />
Each extension/plug-in has its own language file.</p>

<h3>Extension/Plug-in Dropdown</h3>

<p>List all extensions/plug-ins for the selected type. Select an extension/plug-in here and all text items for it will be shown using the language that is set in the Language Dropdown</p>

<h3>Language Dropdown</h3>

<p>List all available languages and (at the bottom) there is an option to add a new language.<br />
Change language here and the list will reload with the text item for the selected extension/plug-in for that language</p>

<h3>Export/Send Button</h3>

<p>The Export/Send button will allow a language pack to be exported (or to be sent to Multi Commander staff for inclusion into next release).</p>

<h3>Restore Button</h3>

<p>The Restore button allows previous versions of language files to be restored. Each time you press Save it will backup the previous version and you can retore to a previously-exported language pack.</p>

<h3>Text Item List</h3>

<p>There are three columns in the text items list: ID , Text and Description/Tooltip/Caption/...</p>

<p>The ID is the Text ID used to identify the text item. It consists of a letter + a number. The letter is a way to categorize different text IDs. Often <strong>M</strong> is used for text items for Menu Items, <strong>D</strong> for Dialog, <strong>E</strong> for Rrror Messages, <strong>C</strong> for Commands. The Text item in the picture above is under <strong>C</strong>, ie. 231 that is selected is actually C-231.</p>

<p>The Text column is the main text that shown for that Text ID.</p>

<p>The Last Column is the secondary text item . Every Text ID can have two text items, one main and one secondary. The secondary is often used for the Tooltip ("hover" text), but can also be used for the descriptive text for script commands, or as a caption for an error message.</p>

<p>Text items in <span style="color: rgb(255, 0, 0);"><em>Red and Italic</em></span> are text items that are <strong>NOT</strong> translated; the core English text is shown instead. The red items are NOT saved to the localized language files. The localized language files should not contain any English texts. The English text for untranslated text is automatically picked up (since the English language file are always read first).</p>

<p>Items shown <strong>in BOLD</strong> are text items that are modified but not yet saved.</p>

<p>By clicking the right mouse button it is possible to opt to show only untranslated items: no translated items are shown and only red, untranslated items remain.</p>

<h2><b>Create New Language Pack</b></h2>

<p>Start the language editor and from the language dropdown select the last option "-- Add New Language --".<br />
The Language Properties window will open.</p>

<p><img alt="" src="/Docs/Images/NewLanguage.png" style="width: 279px; height: 424px;" /></p>

<p>There are two language name fields. The first is the language name in English and the second is language name as spelt in the language that is being added.</p>

<p>Under "Culture name code" enter the two or five letter code for that language. If several variations of the language exist, you should add using the five letter code, so there will be no conflicts.</p>

<p>In "Matching Languages" enter all the language codes that match this language's codes. This field will be used to auto-select the correct language. So a user running Windows set to any of the matching languages, that language will be auto-selected the first time Multi Commander is run for that user.</p>

<p>As an example from the image above: if a user has Windows language set to "sv-FI" it will pick the language pack that is about to be created.<br />
"Matching Languages" can be changed later by pressing the Language Properties button next to the Save button</p>

<p>Press Save to create support for that language. The file UserData\Lanaguge\<span style="line-height: 20.7999992370605px;">SupportedLanguages.xml is then updated and Multi Commander will use this file next time it starts.</span></p>

<p>It is not possible to start translating using the language editor.</p>

<h2><b>Special Characters</b></h2>

<p>Some text items can contain control characters and these must be retained.</p>

<p>The most common such character is&nbsp;<strong>\n</strong>, meaning "new line" and is most often used for text shown in text blocks or message boxes.&nbsp; Make sure there is no space after the control character.</p>

<p>"Line1 \n Line2" = Wrong - "Line2" text would then have an extra space before the text "Line2" text.<br />
"Line1\nLine2" = Correct - There is no extra space character before the "Line2" text</p>

<p>There are also <strong>%s</strong> and <strong>%d</strong>&nbsp;, meaning that strings or numbers will be inserted at these positions and so these control characters must also be kept</p>

<p>For example, in an Explorer Panel there is a Text ID "<strong>L-31"</strong> that looks like: %s/%s in %d/%d Files and %d/%d Folders selected</p>

<p>All the %s and %d control characters will be replaced with strings and numbers when the text item is used.</p>

<p>Another common control character is the &amp; (ampersand) character. This control character is a text item used in menubar or popup menu items and is used to underline automatic Shortcut (hotkey or accelerator) characters.</p>

<h2><b><a name="autosc"></a>Automatic Shortcuts</b></h2>

<p>Menu items and popup menus can be activated using the keyboard. For example, if you press the Alt key, the "File" menu on the menu bar is highlighted.<br />
Note that the File menu now has an underscore under the F and the Edit menu has the E underscored.<br />
The menu bar options now read: <u>F</u>ile, <u>E</u>dit, <u>V</u>iew, and so on.</p>

<p>The underscore below V in the View menu means that you can now press V to drop that menu. The menu that opens can also have underscores for many of its menu items such that they, too, can be accessed them quickly using the keyboard.</p>

<p>The decision on which letter is used as a shortcut (accelerator) is decided by the menu item text. Any &amp; characters in a menu item text will underscore the followin character and it will be used as a shortcut (accelerator) automatically. For Example, "&amp;View" will be shown as "<u>V</u>iew", and "Vie&amp;w" would be shown as "Vie<u>w.</u></p>

<p>This is not unique to Multi Commander, but is a long-standing Windows behaviour. For every menu that is shown there should be no duplicated shortcuts. For items within a menu there should not be more than two (where possible) items that have the same underscored letter. The shortcut will activate the first one.<br />
To avoid this situation the &amp; character may need to be moved to precede another character in the translated text.</p>

<h2><b>Edit Language Files With External Editor</b></h2>

<p>Some people find it easier to translating with their favourite text editor. To do that you first need to follow the same steps as above when creating a new language.</p>

<p>Since language files do not contain untranslated text you need copy the English files to the new languages which you are creating. This requires a bit of manual work.</p>

<ul>
	<li>Unpack the english language pack file manually MC_LangPack_en.zip</li>
	<li>Rename all of the files to match your new language.&nbsp; If your new language culture code is "se" (as in the example image above) you should rename then *_en.xml part of all the language files to *_se.xml</li>
	<li>Then zip them all together again to a file called MC_LangPack_se.zip and place that archive in the standard language pack folder</li>
	<li>Go to UserData\Languages\ folder and delete everything EXCEPT "<b>SupportedLanguages.xml</b>". Do not delete that file since this file will be updated with your new language</li>
	<li>Start the Internal Language Editor again and it will unpack all language packs again to UserData\Languages\</li>
	<li>Start editing the new language files located in UserData\Languages\ in your favourite editor</li>
	<li>When done, start the Internal Language Editor and select Export/Send to export or send the language pack</li>
</ul>

<p>Editing new language files in the UserData\Lanauges location is going to make the export function work without any problems. So then you can create a language pack for sending to be included into the next version of Multi Commander.</p>

<h3>Be aware...</h3>

<p>When editing the language files with an external editor the files are in a format called xml and they are encoded using UTF8. Be careful not to remove xml tags. If xml tags are destroyed the entire xml file will be unreadable. Also special characters like <strong>&amp;</strong> and <strong>" </strong>might need special encoding.</p>

<p>If a language files is not readable by Multi Commander try to open the xml file in a webbrowser. If some xml tags have been lost the browser can often report that it found an xml error on line xx and you can locate and correct the error.</p>

<h2><b>Submit Language Pack</b></h2>

<p>After modifying an existing language or created a new one, a new language pack for that language may be required; so that it can be moved to another machine easily or sent to the developer of Multi Commander to be included in the next release. To create an updated language pack, first make sure that the Language dropdown is set to the language you want to create a language pack for. Then press the "Export/Send" button.</p>

<p>A window will open that has a dropdown with three options. This is to select which type of language pack you want to create.</p>

<ul>
	<li><strong>Internal format (Submit to developer using e-mail)</strong><br />
	This will create a Language pack in the internal format. This is used if you are sending the Language pack to the developers of Multi Commander via email.</li>
	<li><strong>Internal format (Submit to developer using HTTP) <em>(this is the recommended option)</em></strong><br />
	This will create a Language pack in the internal format and this will then be sent to the MultiCommander web service and there is no need for email.<br />
	However, using this method you need a Submit key that you can get by contacting Multi Commander staff.<br />
	A key is needed so that not just anybody can submit incorrect changes that could destroy a language pack.<br />
	This process is entirely automatic and language packs received this way will automatically be included in the next version. If you have a Submit key you can submit language changes as often at you like.</li>
	<li><strong>Export to Public Language Pack Format</strong><br />
	This will export the language pack in the public format. this is the same format as the language files found in the install folder. This format is used if the language pack created should be shared with somebody else or if you want to test it on another machine.</li>
</ul>

<h2><b>Incomplete Translation Work</b></h2>

<p>Multi Commander contains many text items and translating them can be a very long, intensive process.<br />
So if you start a translation but give up because it is too much work, then submit what you have. Somebody else might continue with where you left off.<br />
A partial translations is better than none at all!</p>


